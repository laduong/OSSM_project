@model ItemDisplay<Product>
@{
    @section Buttons{
        <a class="header-item"></a>
        <a asp-action="Dashboard" class="header-item">Tổng quan</a>
        <a asp-action="Batch" class="header-item">Sản phẩm</a>
        <a asp-action="Store" class="header-item">Kho hàng</a>
        <a asp-action="Bill" class="header-item">Hóa đơn</a>
        <a asp-action="Cost" class="header-item">Chi phí</a>
    }

    @section Login{
        <li class="user-info-item">
            <a asp-controller="Login" asp-action="ChangetoChangePassword">Đổi mật khẩu</a>
        </li>
        <li class="user-info-item">
            <a asp-controller="Home" asp-action="Index">Đăng xuất</a>
        </li>
    }
}



<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/nhanSu&DuAn.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jodit/3.20.2/jodit.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jodit/3.20.2/jodit.min.js"></script>
</head>
<body>

    <div class="wrap-back" style="display:flex;">
        <a asp-action="Index"><h2 class="backMainPage"> Trang Chủ</h2></a>
        <p>/</p>
        <a asp-action="Batch"><h2 style="padding-left: 10px;" class="backMainPage">Kho hàng</h2></a>
        <p>/</p>
        <a asp-action="AddBatch"><h2 style="padding-left: 10px;" class="backMainPage"> Nhập lô hàng mới</h2></a>
    </div>
    <div></div>

    <form asp-action="AddBatch" method="post" id="form-addnotification">
        <div class="product-details" style="width:65vw; margin:auto">
            <div style="margin: 16px 10px; justify-content: left; width: 50%">
                <div>
                    <p>Tên lô hàng:</p>
                    <input style=" height: 25px; margin-top: -5px; width: 80%; padding: 16px" id="name-input" type="text" name="name">

                </div>
            </div>

            <div style="width: 50%">
                <p>Ngày nhập hàng:</p>
                <input type="datetime-local" id="birthdaytime" name="buytime" style="width: 80%; padding: 16px">
            </div>


        </div>
        <div class="wrap-sreach">
            <input name="searchString" class="search" type="text" placeholder="Điền thông tin" value="@Model.CurrentSearchString" autocomplete="off">
            <select name="searchField" id="searchField">
                @if (!String.IsNullOrWhiteSpace(@Model.CurrentSearchField))
                {
                    <option value="@Model.CurrentSearchField">@Model.NameVar[Model.CurrentSearchField]</option>
                }

                @foreach (var item in Model.SearchFieldList)
                {
                    @if ((item != Model.CurrentSearchField) && item != "Product_Image")
                    {
                        <option value="@item">@Model.NameVar[@item]</option>
                    }
                }
            </select>
            <button type="submit">
                <i class="fa-solid fa-magnifying-glass"></i>
                Tìm Kiếm
            </button>
        </div>


        <div class="container mt-2" style="width: 85vw; margin: auto;">
            <table class="table-quyTrinh" style="width: 85vw">
                <tr>
                    <th>
                        ID
                        <button name="sortOrder" id="Id" value="Id" onchange="this.forms.submit">
                            <i class="fa fa-sort"></i>
                        </button>
                    </th>
                    <th>
                        Tên sản phẩm
                        <button name="sortOrder" id="Name" value="Name" onchange="this.forms.submit">
                            <i class="fa fa-sort"></i>
                        </button>
                    </th>
                    <th>
                        Giá nhập vào
                        <button name="sortOrder" id="Cost" value="Cost" onchange="this.forms.submit">
                            <i class="fa fa-sort"></i>
                        </button>
                    </th>

                    <th>
                        Số lượng nhập
                    </th>

                    <th style="text-align: center; width: 5%;">
                        Chức năng
                    </th>
                </tr>


                @if (Model.PageCount > 0)
                {
                    List<string> id_list = new List<string>();
                    foreach (var item in Model.Items)
                    {

                        <tr id="0" style="user-select: auto;">
                            <td style="user-select: auto; text-align: center;"> @item.Product_ID</td>
                            <td style="user-select: auto;"> @item.Product_Name</td>
                            <td style="user-select: auto; text-align: center;"> @item.Product_Cost</td>
                            <td style="user-select: auto; text-align: center;">
                                <input class="quanitys" type="number" name="quanity" min="0" max="1000" step="1" value= "">
                            </td>
                            <td style="user-select: auto; text-align: center;">
                                <input class="checkboxes" id="@item.Product_ID" style="width: 26px; height:26px;" type="checkbox" onclick="$(this).attr('value', this.checked ? 1 : 0)" />

                            </td>

                        </tr>
                    }
                }
                else
                {
                    <tr id="1">
                        Không tìm thấy kết quả hợp lệ!!!
                    </tr>
                }
            </table>
        </div>

        <table style="width: 85vw">
            <tr style="font-size: 20px;">
                <td>
                    <a>Tổng quy trình: </a>
                    <span id="total">@Model.ItemCount</span>
                </td>

                <td>
                    <div style="float: right;">
                        <a href="javascript:PagerClick(1);" class="page-btn"> Đầu </a>

                        @if (Model.CurrentPage != 1)
                        {
                            <a href="javascript:PagerClick(@Model.CurrentPage - 1);" class="page-btn"> Trước </a>
                        }
                        else
                        {
                            <a class="page-btn"> Trước </a>
                        }


                        @{
                            if (Model.CurrentPage <= 3)
                            {
                                for (int i = 1; i <= Math.Min(Model.PageCount, 5); i++)
                                {
                                    @if (i != Model.CurrentPage)
                                    {
                                        <a href="javascript:PagerClick(@i);" class="page-btn">@i</a>
                                    }
                                    else
                                    {
                                        <span style="color:#f00;" class="page-btn">@i</span>
                                    }
                                }
                            }
                            else if (Model.CurrentPage >= Model.PageCount - 2)
                            {
                                for (int i = Math.Max(1, Model.PageCount - 4); i <= Model.PageCount; i++)
                                {
                                    @if (i != Model.CurrentPage)
                                    {
                                        <a href="javascript:PagerClick(@i);" class="page-btn">@i</a>
                                    }
                                    else
                                    {
                                        <span style="color:#f00;" class="page-btn">@i</span>
                                    }
                                }
                            }
                            else
                            {
                                for (int i = Math.Max(1, Model.CurrentPage - 2); i <= Math.Min(Model.PageCount, Model.CurrentPage + 2); i++)
                                {
                                    @if (i != Model.CurrentPage)
                                    {
                                        <a href="javascript:PagerClick(@i);" class="page-btn">@i</a>
                                    }
                                    else
                                    {
                                        <span style="color:#f00;" class="page-btn">@i</span>
                                    }
                                }
                            }
                        }




                        @if (Model.CurrentPage != Model.PageCount)
                        {
                            <a href="javascript:PagerClick(@Model.CurrentPage + 1);" class="page-btn"> Sau </a>
                        }
                        else
                        {
                            <a class="page-btn"> Sau </a>
                        }

                        <a href="javascript:PagerClick(@Model.PageCount);" class="page-btn"> Cuối </a>


                    </div>



                </td>
                <td width="120px">
                    <a style="float: right;">
                        <input type="number" style="width: 50px; height: 23px;" id="hfCurrentPage" name="currentPage" placeholder="1" min="1" max="@Model.PageCount" />
                        <input type="submit" style="height: 23px;" value="Đến">
                    </a>
                </td>
            </tr>

        </table>




        <div class="wrap-button">
            <input type="hidden" id="isAdd" name="IsAdd" />
            <input type="hidden" id="SendVar" name="SendVar" value="123" />

            <button class="add-nhanSu btn-confirm" onclick="confirm_change()" type="button" id="Send">
                <i class="fa-solid fa-plus"></i>
                Gửi duyệt
            </button>
        </div>

        <style>

            .product-details {
                display: flex;
                justify-content: space-between;
                padding: 20px;
                margin-top: 5%;
            }

            .left-column,
            .right-column {
                flex: 1;
            }

            .left-column {
                width: 50%;
                float: left;
            }

            .product-info {
                margin-bottom: 2%;
            }

            .product-image {
                margin-top: 5%;
                width: 70%;
                height: 40%;
                margin-bottom: 2%;
            }

            .action-button {
                background-color: #FFD700;
                color: #000;
                font-size: 16px;
                margin-top: 20px;
                margin-right: 100%;
                margin-left: 20px;
                width: 35%;
                height: 5%;
                border: none;
                border-radius: 10px;
                cursor: pointer;
            }

            .right-column {
                width: 50%;
                float: left;
                position: relative;
            }

            .left-column .product-info > * {
                margin-bottom: 25px; /* Điều chỉnh giá trị này để thay đổi khoảng cách giữa các thẻ con */
            }

            .right-column .product-info > * {
                margin-bottom: 25px; /* Điều chỉnh giá trị này để thay đổi khoảng cách giữa các thẻ con */
            }

            .right-column .product-info {
                margin-bottom: 30px;
            }

            .right-column .image-container {
                position: relative;
            }

            .right-column img {
                width: 80%;
                height: 20%;
                margin-bottom: 2%;
            }

            /* Nút "Lưu" ở dưới hình ảnh ở cột phải */
            .right-column .save-button {
                background-color: #FFD700;
                color: #000;
                font-size: 16px;
                margin-top: 10px;
                margin-left: 55%;
                margin-right: 100%;
                width: 25%;
                height: 5%;
                border: none;
                border-radius: 10px;
                cursor: pointer;
            }
        </style>

        </div>

        <div style="display: none; min-width: 40%; height: 30%; left: 30%; top: 30%; z-index: 1;" class="form-frame" id="change-confirm">
            <a style="text-align: center; color: #000;"> Bạn có chắc chắn muốn chỉnh sửa thông tin dự án này? </a>
            <div>
                <button class="form-submit" style="color:#000; border: 1px #edcd1f solid;" type="submit">Có</button>
                <button class="form-submit" type="button" onclick="confirm_change_disabled()" style="margin-top: 15px; color:#000; border: 1px #edcd1f solid;">Không</button>
            </div>
        </div>
    </form>
   
    
    <script>

        function confirm_change() {
            document.getElementById("isAdd").value = "y";
            var x = document.getElementsByClassName("checkboxes");
            
            var z = document.getElementsByClassName("quanitys");
            var y = document.getElementsByClassName("buytime");
            alert(y.value);
            let i;
            let sendVar = new String();
            for (i = 0; i < x.length; i++) {
                sendVar += x[i].id + "." + z[i].value + ":" + x[i].value + "-";
            }
            document.getElementById("SendVar").value = sendVar;
            alert(sendVar);
            document.getElementById("change-confirm").style.display = "block";
        }


        function confirm_change_disabled() {
            document.getElementById("change-confirm").style.display = "none";
        }
    </script>
    <script></script>

</body>
</html>